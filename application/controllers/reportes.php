<?php if (!defined('BASEPATH')) exit('No direct script access allowed');/** * Start * Call all statics pages */class Reportes extends MY_Controller {        function __construct() {        parent::__construct();        // Force encrypted connection        $this->police->force_ssl();        $this->load->library('form_validation');                //la variable evento se carga con todo la configuracion        $this->evento = $data['evento'] = $this->Registro_model->config_conference();                        // Control police start permission and authentication        $data['documents'] = $this->police->police_control();        $this->load->vars($data);    }    //--------------------------------------------------------------------------    /**     * Listado de todos los cupones     *      */    function index() {        $data['repo'] = 'active';        $data['main_content'] = 'reportes/reportes';        $this->load->view(config_item('template') . 'main', $data);    }    //--------------------------------------------------------------------------      /**     * Listado de todos los cupones     *      */    function entry() {        // Para que form_validator pueda validar el Get        $_POST = $_GET;                $this->form_validation->set_rules('buscar', 'Buscar', '');        $this->form_validation->set_rules('id_esta', 'Estatus', '');        $this->form_validation->set_rules('id_tipo', 'Tipo', '');        $this->form_validation->set_rules('id_anfi', 'Anfitrion', '');                        $this->form_validation->run();                $data['selec_anfitriones'] = $this->Registro_model->anfitriones();        $data['estatus'] = $this->Registro_model->estatus();        $data['tipo_participantes'] = $this->Registro_model->tipo_participantes();        $data['jscript'] = array ('js/reportes_entry.js');                $data['entry'] = 'active';        $data['main_content'] = 'reportes/entry';        $this->load->view(config_item('template') . 'main', $data);    }    //--------------------------------------------------------------------------      /**     * LLEnado de la tabla para participantes o index     */    function entry_table(){      if($this->input->is_ajax_request()){          //          $pagina = $this->input->post('pagina');//          $porPagina = $this->input->post('porPagina');//          $inicio = ($pagina*$porPagina)-$porPagina;                    $buscar = NULL;          $arr_anfi = $this->input->post('anfitri');          $arr_tipo = $this->input->post('tipo');          $arr_esta = $this->input->post('estatus');          $arr_asis = $this->input->post('asisten');                    $data['contar'] = 0;          $data['tabla'] = $this->Registro_model->participantes_lista($buscar, $arr_anfi, $arr_tipo, $arr_esta, $arr_asis);            $this->load->view('reportes/ajax/entry_table', $data);      } else {          redirect('registro');      }    }    //--------------------------------------------------------------------------          /**     * Connto of diferent filters     *      */    function gafetes() {                $data['selec_anfitriones'] = $this->Registro_model->anfitriones();        $data['estatus'] = $this->Registro_model->estatus();        $data['tipo_participantes'] = $this->Registro_model->tipo_participantes();        $data['jscript'] = array ('js/gafetes_lotes.js');        $data['gafe'] = 'active';        $data['main_content'] = 'reportes/gafetes';        $this->load->view(config_item('template') . 'main', $data);    }    //--------------------------------------------------------------------------          /**     * Connto of diferent filters     *      */    function gafetes_lote() {        $this->load->library('barcode');        $buscar = FALSE;        $inicio = $this->input->get('inicio');        $lote = $this->input->get('lote');        $arr_anfi = FALSE; //$this->input->get('anfitri');        $arr_tipo = FALSE; //$this->input->get('tipo');        $arr_esta = 3; //$this->input->get('estatus');        $arr_asis = FALSE; //$this->input->get('asisten');        $datos = $this->Registro_model->participantes_lista($buscar, $arr_anfi, $arr_tipo, $arr_esta, $arr_asis, FALSE, $inicio, $lote);          //$codigo = $datos->row()->codigo_barras;                $data['multi'] = FALSE;//        if($this->evento->multi_conferencia === TRUE){//            $data['multi'] = TRUE;//            $data['conferencias'] = $this->Registro_model->conferencias_participante($id);  //        }                $data['datos'] = $datos;         /*$data['id_code'] = $codigo;        $data['codigo'] = $this->barcode->genera_codigo( $codigo );*/        $this->load->view('reportes/ajax/gafetes_lote', $data);    }    //--------------------------------------------------------------------------          /**     * Connto of diferent filters     *      */    function statistics() {        $data['links'] = array ('css/paginator.css');         $data['jscript'] = array ('js/vendor/jquery.ui.touch-punch.min.js',            'js/vendor/jquery.pagination.js',            'js/presparticipantes.js');        $data['contenido'] = $this->Registro_model->repo_participacion();         $this->load->view('reportes/participantes', $data);    }    //--------------------------------------------------------------------------      /**     * Listado de todos los cupones     *      */    function excel() {                $file="ParticipaciÃ³n_completa.xls";        $this->output->set_header("Content-type: application/vnd.ms-excel; name='excel'");        $this->output->set_header("Content-Disposition: attachment; filename=$file");                $buscar = NULL;        $arr_anfi = $this->input->get('anfitri');        $arr_tipo = $this->input->get('tipo');        $arr_esta = $this->input->get('estatus');        $arr_asis = $this->input->get('asisten');        $data['contar'] = 0;        $data['campos'] = $this->Registro_model->campos();        $data['tabla'] = $this->Registro_model->participantes_lista($buscar, $arr_anfi, $arr_tipo, $arr_esta, $arr_asis);                  $info = $this->load->view('reportes/ajax/entry_table_full', $data, TRUE);        $this->output->set_output(utf8_decode($info));    }    //--------------------------------------------------------------------------      }/* End of file administracion.php *//* Location: ./application/controllers/administracion.php */